{% extends "main/base.html" %}
{% load static %}
{% load humanize %}

{% block content %}
    <div class="country-choice disabled">
        <div class="container">
            <div class="country-choice-header">
                <h2>Выберите страну</h2>
                <img src="{% static 'img/close.png' %}" alt="" onclick="toggleCountryChoice()" style="cursor: pointer;">
            </div>
            <img src="{% static 'img/loupe.png' %}" alt="" style="position: absolute; padding: 10px;" width="18px" height="18px">
            <input type="text" id="search" placeholder="Поиск" oninput="searchUpdate()">
            <div class="country-list">
                {% for key, item in countryList.items %}
                    <a href="/{{ key|lower }}">{{ item }}</a>
                {% endfor %}
            </div>
        </div>
    </div>
    <div class="container">
        <header>
            <a class="country-choice-label" onclick="toggleCountryChoice()">{{ countryName }} <img class="arrow" src="{% static 'img/arrow.svg' %}" height="20px" width="20px"></img></a>
        </header>
        <div class="covid-info">
            <div class="label">
                <div class="left">
                    <h1 class="covid-data-label">Данные по COVID-19</h1>
                    <h3 class="last-update">Последнее обновление: {{ lastUpdated }}</h3>
                </div>
                <div class="right">
                    <img src="{% static 'img/no-virus.png' %}" alt="" class="virus-img">
                </div>
            </div>
            <div class="country-name">{{ countryName }}</div>
            <div class="covid-data">
                <div class="data-block">
                    <div class="number" style="color: #C2410C" id="infected">{{ data.cases|intcomma }}</div>
                    <div class="label">Всего заболеваний</div>
                </div>
                <div class="data-block">
                    <div class="number" style="color: #065F46" id="recovered">{{ data.recovered|intcomma }}</div>
                    <div class="label">Выздоровело</div>
                </div>
                <div class="data-block">
                    <div class="number" style="color: #C2410C" id="infected-day">{{ data.todayCases|intcomma }}</div>
                    <div class="label">Выявлено за последние сутки</div>
                </div>
                <div class="data-block">
                    <div class="number" style="color: #000" id="deaths">{{ data.deaths|intcomma }}</div>
                    <div class="label">Человек умерло</div>
                </div>
            </div>
        </div>
        <div class="stats">
            <h1>Статистика</h1>
            <canvas id="canvas"></canvas>
        </div>
    </div>
    <script>
        let countries = { {% for key, item in countryList.items %}{{ key }}: '{{ item }}', {% endfor %} }
    </script>
    <script src="{% static 'js/script.js' %}"></script>
{#<canvas id="canvas"></canvas>#}
{% endblock %}