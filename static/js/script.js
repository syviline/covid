let canvas = document.querySelector('#canvas')
let ctx = canvas.getContext('2d')

let cases = {
    "1/22/20": 557,
    "1/23/20": 655,
    "1/24/20": 941,
    "1/25/20": 1434,
    "1/26/20": 2118,
    "1/27/20": 2927,
    "1/28/20": 5578,
    "1/29/20": 6167,
    "1/30/20": 8235,
    "1/31/20": 9927,
    "2/1/20": 12038,
    "2/2/20": 16787,
    "2/3/20": 19887,
    "2/4/20": 23898,
    "2/5/20": 27643,
    "2/6/20": 30805,
    "2/7/20": 34399,
    "2/8/20": 37130,
    "2/9/20": 40161,
    "2/10/20": 42769,
    "2/11/20": 44811,
    "2/12/20": 45229,
    "2/13/20": 60381,
    "2/14/20": 66909,
    "2/15/20": 69052,
    "2/16/20": 71235,
    "2/17/20": 73270,
    "2/18/20": 75152,
    "2/19/20": 75652,
    "2/20/20": 76212,
    "2/21/20": 76841,
    "2/22/20": 78602,
    "2/23/20": 78982,
    "2/24/20": 79550,
    "2/25/20": 80404,
    "2/26/20": 81381,
    "2/27/20": 82740,
    "2/28/20": 84128,
    "2/29/20": 86022,
    "3/1/20": 88400,
    "3/2/20": 90379,
    "3/3/20": 92980,
    "3/4/20": 95282,
    "3/5/20": 98100,
    "3/6/20": 102016,
    "3/7/20": 106113,
    "3/8/20": 110051,
    "3/9/20": 114230,
    "3/10/20": 119055,
    "3/11/20": 126717,
    "3/12/20": 132519,
    "3/13/20": 146875,
    "3/14/20": 157974,
    "3/15/20": 169251,
    "3/16/20": 184036,
    "3/17/20": 200039,
    "3/18/20": 219595,
    "3/19/20": 246703,
    "3/20/20": 277579,
    "3/21/20": 309721,
    "3/22/20": 344828,
    "3/23/20": 387489,
    "3/24/20": 428574,
    "3/25/20": 479649,
    "3/26/20": 542582,
    "3/27/20": 607566,
    "3/28/20": 677326,
    "3/29/20": 734000,
    "3/30/20": 799335,
    "3/31/20": 876256,
    "4/1/20": 959241,
    "4/2/20": 1042396,
    "4/3/20": 1126208,
    "4/4/20": 1185351,
    "4/5/20": 1256187,
    "4/6/20": 1330136,
    "4/7/20": 1399770,
    "4/8/20": 1483065,
    "4/9/20": 1570050,
    "4/10/20": 1655372,
    "4/11/20": 1729757,
    "4/12/20": 1849387,
    "4/13/20": 1920407,
    "4/14/20": 2004274,
    "4/15/20": 2082496,
    "4/16/20": 2178189,
    "4/17/20": 2266231,
    "4/18/20": 2343419,
    "4/19/20": 2420184,
    "4/20/20": 2495741,
    "4/21/20": 2571745,
    "4/22/20": 2653236,
    "4/23/20": 2737234,
    "4/24/20": 2821349,
    "4/25/20": 2903700,
    "4/26/20": 2975167,
    "4/27/20": 3045416,
    "4/28/20": 3121220,
    "4/29/20": 3198418,
    "4/30/20": 3281704,
    "5/1/20": 3370182,
    "5/2/20": 3449422,
    "5/3/20": 3524161,
    "5/4/20": 3601874,
    "5/5/20": 3682096,
    "5/6/20": 3772615,
    "5/7/20": 3861467,
    "5/8/20": 3951910,
    "5/9/20": 4036319,
    "5/10/20": 4111881,
    "5/11/20": 4188339,
    "5/12/20": 4272822,
    "5/13/20": 4357716,
    "5/14/20": 4453798,
    "5/15/20": 4549825,
    "5/16/20": 4644155,
    "5/17/20": 4722423,
    "5/18/20": 4811217,
    "5/19/20": 4908172,
    "5/20/20": 5010366,
    "5/21/20": 5117026,
    "5/22/20": 5223405,
    "5/23/20": 5327994,
    "5/24/20": 5422531,
    "5/25/20": 5508955,
    "5/26/20": 5602173,
    "5/27/20": 5705773,
    "5/28/20": 5824377,
    "5/29/20": 5945407,
    "5/30/20": 6082395,
    "5/31/20": 6189006,
    "6/1/20": 6284750,
    "6/2/20": 6406443,
    "6/3/20": 6520621,
    "6/4/20": 6651490,
    "6/5/20": 6782389,
    "6/6/20": 6916462,
    "6/7/20": 7029141,
    "6/8/20": 7130609,
    "6/9/20": 7255083,
    "6/10/20": 7390530,
    "6/11/20": 7527833,
    "6/12/20": 7656872,
    "6/13/20": 7792032,
    "6/14/20": 7924680,
    "6/15/20": 8043087,
    "6/16/20": 8184797,
    "6/17/20": 8329380,
    "6/18/20": 8470136,
    "6/19/20": 8650321,
    "6/20/20": 8807898,
    "6/21/20": 8936632,
    "6/22/20": 9075013,
    "6/23/20": 9242092,
    "6/24/20": 9414971,
    "6/25/20": 9593311,
    "6/26/20": 9785154,
    "6/27/20": 9963872,
    "6/28/20": 10128831,
    "6/29/20": 10282421,
    "6/30/20": 10458818,
    "7/1/20": 10676199,
    "7/2/20": 10885968,
    "7/3/20": 11088611,
    "7/4/20": 11285011,
    "7/5/20": 11469073,
    "7/6/20": 11632594,
    "7/7/20": 11842590,
    "7/8/20": 12056312,
    "7/9/20": 12281314,
    "7/10/20": 12514027,
    "7/11/20": 12731700,
    "7/12/20": 12925559,
    "7/13/20": 13115865,
    "7/14/20": 13337090,
    "7/15/20": 13568316,
    "7/16/20": 13819907,
    "7/17/20": 14061989,
    "7/18/20": 14299993,
    "7/19/20": 14514204,
    "7/20/20": 14719694,
    "7/21/20": 14954375,
    "7/22/20": 15234083,
    "7/23/20": 15517266,
    "7/24/20": 15798644,
    "7/25/20": 16053911,
    "7/26/20": 16268479,
    "7/27/20": 16494983,
    "7/28/20": 16744409,
    "7/29/20": 17033230,
    "7/30/20": 17313925,
    "7/31/20": 17604159,
    "8/1/20": 17854850,
    "8/2/20": 18086667,
    "8/3/20": 18292815,
    "8/4/20": 18547235,
    "8/5/20": 18824882,
    "8/6/20": 19108192,
    "8/7/20": 19391535,
    "8/8/20": 19651124,
    "8/9/20": 19878168,
    "8/10/20": 20102330,
    "8/11/20": 20364359,
    "8/12/20": 20637700,
    "8/13/20": 20927027,
    "8/14/20": 21230643,
    "8/15/20": 21480836,
    "8/16/20": 21696029,
    "8/17/20": 21902760,
    "8/18/20": 22158908,
    "8/19/20": 22435529,
    "8/20/20": 22708713,
    "8/21/20": 22969886,
    "8/22/20": 23235386,
    "8/23/20": 23441868,
    "8/24/20": 23665455,
    "8/25/20": 23910017,
    "8/26/20": 24192597,
    "8/27/20": 24477130,
    "8/28/20": 24760436,
    "8/29/20": 25025727,
    "8/30/20": 25247152,
    "8/31/20": 25507328,
    "9/1/20": 25773235,
    "9/2/20": 26056416,
    "9/3/20": 26337999,
    "9/4/20": 26652306,
    "9/5/20": 26922626,
    "9/6/20": 27152912,
    "9/7/20": 27371041,
    "9/8/20": 27611503,
    "9/9/20": 27896907,
    "9/10/20": 28196717,
    "9/11/20": 28518390,
    "9/12/20": 28805651,
    "9/13/20": 29048497,
    "9/14/20": 29311101,
    "9/15/20": 29596420,
    "9/16/20": 29900930,
    "9/17/20": 30215729,
    "9/18/20": 30541692,
    "9/19/20": 30834298,
    "9/20/20": 31086923,
    "9/21/20": 31361668,
    "9/22/20": 31646410,
    "9/23/20": 31922488,
    "9/24/20": 32276011,
    "9/25/20": 32607077,
    "9/26/20": 32896010,
    "9/27/20": 33147911,
    "9/28/20": 33402277,
    "9/29/20": 33685207,
    "9/30/20": 34011272,
    "10/1/20": 34329900,
    "10/2/20": 34628064,
    "10/3/20": 34961119,
    "10/4/20": 35222329,
    "10/5/20": 35521858,
    "10/6/20": 35848139,
    "10/7/20": 36199287,
    "10/8/20": 36561050,
    "10/9/20": 36922218,
    "10/10/20": 37279712,
    "10/11/20": 37567565,
    "10/12/20": 37858977,
    "10/13/20": 38177665,
    "10/14/20": 38559341,
    "10/15/20": 38966634,
    "10/16/20": 39378423,
    "10/17/20": 39752752,
    "10/18/20": 40069323,
    "10/19/20": 40455880,
    "10/20/20": 40844781,
    "10/21/20": 41289336,
    "10/22/20": 41761713,
    "10/23/20": 42259278,
    "10/24/20": 42716493,
    "10/25/20": 43077349,
    "10/26/20": 43563148,
    "10/27/20": 44033489,
    "10/28/20": 44545427,
    "10/29/20": 45095646,
    "10/30/20": 45667527,
    "10/31/20": 46144922,
    "11/1/20": 46607708,
    "11/2/20": 47169348,
    "11/3/20": 47723916,
    "11/4/20": 48235130,
    "11/5/20": 48832228,
    "11/6/20": 49477137,
    "11/7/20": 50077838,
    "11/8/20": 50561534,
    "11/9/20": 51061780,
    "11/10/20": 51620718,
    "11/11/20": 52270873,
    "11/12/20": 52918389,
    "11/13/20": 53571202,
    "11/14/20": 54169392,
    "11/15/20": 54643965,
    "11/16/20": 55176077,
    "11/17/20": 55787145,
    "11/18/20": 56414511,
    "11/19/20": 57068352,
    "11/20/20": 57740085,
    "11/21/20": 58329259,
    "11/22/20": 58816701,
    "11/23/20": 59340419,
    "11/24/20": 59932775,
    "11/25/20": 60570659,
    "11/26/20": 61156963,
    "11/27/20": 61840852,
    "11/28/20": 62428987,
    "11/29/20": 62917731,
    "11/30/20": 63422469,
    "12/1/20": 64040494,
    "12/2/20": 64693546,
    "12/3/20": 65388834,
    "12/4/20": 66074763,
    "12/5/20": 66721594,
    "12/6/20": 67257931,
    "12/7/20": 67774607,
    "12/8/20": 68424344,
    "12/9/20": 69093808,
    "12/10/20": 70594659,
    "12/11/20": 71300704,
    "12/12/20": 71937739,
    "12/13/20": 72467046,
    "12/14/20": 73000015,
    "12/15/20": 73648777,
    "12/16/20": 74376345,
    "12/17/20": 75114609,
    "12/18/20": 75831855,
    "12/19/20": 76452137,
    "12/20/20": 76983188,
    "12/21/20": 77524554,
    "12/22/20": 78178326,
    "12/23/20": 78868714,
    "12/24/20": 79546575,
    "12/25/20": 80025231,
    "12/26/20": 80532296,
    "12/27/20": 80964699,
    "12/28/20": 81453793,
    "12/29/20": 82119550,
    "12/30/20": 82869456,
    "12/31/20": 83638175,
    "1/1/21": 84204284,
    "1/2/21": 84789706,
    "1/3/21": 85311582,
    "1/4/21": 85862601,
    "1/5/21": 86599008,
    "1/6/21": 87383584,
    "1/7/21": 88275244,
    "1/8/21": 89086346,
    "1/9/21": 89844770,
    "1/10/21": 90432846,
    "1/11/21": 91049721,
    "1/12/21": 91746984,
    "1/13/21": 92494681,
    "1/14/21": 93252690,
    "1/15/21": 94023110,
    "1/16/21": 94668386,
    "1/17/21": 95196057,
    "1/18/21": 95708097,
    "1/19/21": 96305555,
    "1/20/21": 97000480,
    "1/21/21": 97655274,
    "1/22/21": 98312659,
    "1/23/21": 98884280,
    "1/24/21": 99336248,
    "1/25/21": 99824475,
    "1/26/21": 100377715,
    "1/27/21": 100977403,
    "1/28/21": 101589349,
    "1/29/21": 102179998,
    "1/30/21": 102697629,
    "1/31/21": 103082202,
    "2/1/21": 103523498,
    "2/2/21": 103980458,
    "2/3/21": 104503878,
    "2/4/21": 104970751,
    "2/5/21": 105503213,
    "2/6/21": 105881720,
    "2/7/21": 106281639,
    "2/8/21": 106593011,
    "2/9/21": 107019784,
    "2/10/21": 107456125,
    "2/11/21": 107897906,
    "2/12/21": 108326776,
    "2/13/21": 108701388,
    "2/14/21": 108996570,
    "2/15/21": 109279887,
    "2/16/21": 109627491,
    "2/17/21": 110022607,
    "2/18/21": 110427639,
    "2/19/21": 110839002,
    "2/20/21": 111210976,
    "2/21/21": 111526272,
    "2/22/21": 111813444,
    "2/23/21": 112201988,
    "2/24/21": 112647235,
    "2/25/21": 113095208,
    "2/26/21": 113538522,
    "2/27/21": 113928912,
    "2/28/21": 114232905,
    "3/1/21": 114536000,
    "3/2/21": 114846209,
    "3/3/21": 115287105,
    "3/4/21": 115740642,
    "3/5/21": 116188164,
    "3/6/21": 116599407,
    "3/7/21": 116968730,
    "3/8/21": 117267082,
    "3/9/21": 117680156,
    "3/10/21": 118147405,
    "3/11/21": 118624485,
    "3/12/21": 119113939,
    "3/13/21": 119568575,
    "3/14/21": 119929393,
    "3/15/21": 120277017,
    "3/16/21": 120750296,
    "3/17/21": 121289843,
    "3/18/21": 121843422,
    "3/19/21": 122405442,
    "3/20/21": 122905418,
    "3/21/21": 123329818,
    "3/22/21": 123745165,
    "3/23/21": 124259371,
    "3/24/21": 124893030,
    "3/25/21": 125544891,
    "3/26/21": 126186325,
    "3/27/21": 126772098,
    "3/28/21": 127242604,
    "3/29/21": 127699899,
    "3/30/21": 128268239,
    "3/31/21": 128951610,
    "4/1/21": 129663989,
    "4/2/21": 130298306,
    "4/3/21": 130828843,
    "4/4/21": 131382854,
    "4/5/21": 131869445,
    "4/6/21": 132473984,
    "4/7/21": 133158636,
    "4/8/21": 133998569,
    "4/9/21": 134748366,
    "4/10/21": 135415046,
    "4/11/21": 136105477,
    "4/12/21": 136719897,
    "4/13/21": 137499422,
    "4/14/21": 138316682,
    "4/15/21": 139133121,
    "4/16/21": 139990464,
    "4/17/21": 140776831,
    "4/18/21": 141462552,
    "4/19/21": 142155324,
    "4/20/21": 143009205,
    "4/21/21": 143900195,
    "4/22/21": 144798789,
    "4/23/21": 145703093,
    "4/24/21": 146524398,
    "4/25/21": 147247621,
    "4/26/21": 147929493,
    "4/27/21": 148773874,
    "4/28/21": 149679829,
    "4/29/21": 150577975,
    "4/30/21": 151457879,
    "5/1/21": 152255545,
    "5/2/21": 152930217,
    "5/3/21": 153610002,
    "5/4/21": 154416972,
    "5/5/21": 155258968,
    "5/6/21": 156129899,
    "5/7/21": 156962490,
    "5/8/21": 157748995,
    "5/9/21": 158391120,
    "5/10/21": 159010365,
    "5/11/21": 159749034,
    "5/12/21": 160509589,
    "5/13/21": 161235073,
    "5/14/21": 161952609,
    "5/15/21": 162581225,
    "5/16/21": 163130304,
    "5/17/21": 163669602,
    "5/18/21": 164291935,
    "5/19/21": 164963964,
    "5/20/21": 165243893,
    "5/21/21": 165869977,
    "5/22/21": 166448986,
    "5/23/21": 166925921,
    "5/24/21": 167378808,
    "5/25/21": 167910969,
    "5/26/21": 168480228,
    "5/27/21": 169034640,
    "5/28/21": 169534894,
    "5/29/21": 170016763,
    "5/30/21": 170408576,
    "5/31/21": 170787183,
    "6/1/21": 171250333,
    "6/2/21": 171736162,
    "6/3/21": 172225578,
    "6/4/21": 172644943,
    "6/5/21": 173043822,
    "6/6/21": 173366975,
    "6/7/21": 173687611,
    "6/8/21": 174054442,
    "6/9/21": 174474211,
    "6/10/21": 174923934,
    "6/11/21": 175344757,
    "6/12/21": 175717459,
    "6/13/21": 176020973,
    "6/14/21": 176328524,
    "6/15/21": 176699729,
    "6/16/21": 177098385,
    "6/17/21": 177490886,
    "6/18/21": 177897583,
    "6/19/21": 178246951,
    "6/20/21": 178549262,
    "6/21/21": 178843058,
    "6/22/21": 179214695,
    "6/23/21": 179652308,
    "6/24/21": 180057308,
    "6/25/21": 180479166,
    "6/26/21": 180845096,
    "6/27/21": 181156482,
    "6/28/21": 181484850,
    "6/29/21": 181864402,
    "6/30/21": 182261310,
    "7/1/21": 182702298,
    "7/2/21": 183143601,
    "7/3/21": 183520207,
    "7/4/21": 183848650,
    "7/5/21": 184218014,
    "7/6/21": 184671095,
    "7/7/21": 185134849,
    "7/8/21": 185615267,
    "7/9/21": 186122917,
    "7/10/21": 186549836,
    "7/11/21": 186919999,
    "7/12/21": 187356722,
    "7/13/21": 187876552,
    "7/14/21": 188417599,
    "7/15/21": 188989796,
    "7/16/21": 189588461,
    "7/17/21": 190062273,
    "7/18/21": 190492555,
    "7/19/21": 190988076,
    "7/20/21": 191519273,
    "7/21/21": 192077855,
    "7/22/21": 192642273,
    "7/23/21": 193333095,
    "7/24/21": 193805052,
    "7/25/21": 194248852,
    "7/26/21": 194789634,
    "7/27/21": 195399562,
    "7/28/21": 196043550,
    "7/29/21": 196696568,
    "7/30/21": 197427678,
    "7/31/21": 197937378,
    "8/1/21": 198417225,
    "8/2/21": 198995708,
    "8/3/21": 199632581,
    "8/4/21": 200307948,
    "8/5/21": 200996600,
    "8/6/21": 201817797,
    "8/7/21": 202367648,
    "8/8/21": 202807724,
    "8/9/21": 203463759,
    "8/10/21": 204111992,
    "8/11/21": 204840026,
    "8/12/21": 205550493,
    "8/13/21": 206355990,
    "8/14/21": 206889204,
    "8/15/21": 207352871,
    "8/16/21": 208032012,
    "8/17/21": 208714116,
    "8/18/21": 209442240,
    "8/19/21": 210157418,
    "8/20/21": 210947354,
    "8/21/21": 211486629,
    "8/22/21": 211932721,
    "8/23/21": 212637785,
    "8/24/21": 213324174,
    "8/25/21": 214054649,
    "8/26/21": 214790204,
    "8/27/21": 215535014,
    "8/28/21": 216081581,
    "8/29/21": 216527981,
    "8/30/21": 217215116,
    "8/31/21": 217833736,
    "9/1/21": 218560650,
    "9/2/21": 219238454,
    "9/3/21": 219955598,
    "9/4/21": 220444440,
    "9/5/21": 220871541,
    "9/6/21": 221309143,
    "9/7/21": 222046094,
    "9/8/21": 222676835,
    "9/9/21": 223313958,
    "9/10/21": 223947302,
    "9/11/21": 224398781,
    "9/12/21": 224762976,
    "9/13/21": 225372806,
    "9/14/21": 225922702,
    "9/15/21": 226491083,
    "9/16/21": 227065902,
    "9/17/21": 227659305,
    "9/18/21": 228192357,
    "9/19/21": 228549852,
    "9/20/21": 229090633,
    "9/21/21": 229559016,
    "9/22/21": 230096150,
    "9/23/21": 230606918,
    "9/24/21": 231154714,
    "9/25/21": 231518210,
    "9/26/21": 231849201,
    "9/27/21": 232337207,
    "9/28/21": 232784298,
    "9/29/21": 233286558,
    "9/30/21": 233771598,
    "10/1/21": 234316033,
    "10/2/21": 234657689,
    "10/3/21": 234949737,
    "10/4/21": 235408191,
    "10/5/21": 235825585,
    "10/6/21": 236338773,
    "10/7/21": 236770669,
    "10/8/21": 237249330,
    "10/9/21": 237578599,
    "10/10/21": 237879268,
    "10/11/21": 238272643,
    "10/12/21": 238705193,
    "10/13/21": 239130342
}

let newcases = {}
let i = 0
Object.keys(cases).forEach(key => {
    if (i % 5 == 0) {
        newcases[key] = cases[key]
    }
    i++;
})

test = () => {
    chart.destroy()
    chart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
        datasets: [{
            label: '# of Votes',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 2,
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            },
            interaction: {
                mode: 'nearest'
            }
        }
    }
})
}

let chart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: Object.keys(newcases),
        datasets: [{
            label: 'Случаев заражения',
            data: Object.values(newcases),
            borderWidth: 2,
            pointRadius: 0,
            backgroundColor: 'rgb(180, 0, 0)',
            borderColor: 'rgb(180, 0, 0)',
        }]
    },
    options: {
        responsive: true,
        scales: {
            y: {
                beginAtZero: true
            }
        }, hover: {
            mode: 'nearest',
            intersect: true
        }, interaction: {
            intersect: false
        }
    }
})

function numberWithSpaces(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
}

let covidInfected = document.querySelector('#infected')
let covidRecovered = document.querySelector('#recovered')
let covidInfectedDay = document.querySelector('#infected-day')
let covidDeaths = document.querySelector('#deaths')

function dataChoice(data) {
    if (data == 'russia') {
        document.querySelector('#russia-data-choice').classList.add('selected')
        document.querySelector('#world-data-choice').classList.remove('selected')
        covidInfected.innerText = numberWithSpaces(covidData.russia.infected)
        covidRecovered.innerText = numberWithSpaces(covidData.russia.recovered)
        covidInfectedDay.innerText = numberWithSpaces(covidData.russia.infectedDay)
        covidDeaths.innerText = numberWithSpaces(covidData.russia.deaths)
    } else if (data == 'world') {
        document.querySelector('#russia-data-choice').classList.remove('selected')
        document.querySelector('#world-data-choice').classList.add('selected')
        covidInfected.innerText = numberWithSpaces(covidData.world.infected)
        covidRecovered.innerText = numberWithSpaces(covidData.world.recovered)
        covidInfectedDay.innerText = numberWithSpaces(covidData.world.infectedDay)
        covidDeaths.innerText = numberWithSpaces(covidData.world.deaths)
    }
}